<div class="span5">
<h2><%= title 'Edit ' + resource_name.to_s.humanize + ' Profile' %></h2>

<div class="profile_well">
  <%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f| %>
    <%= f.error_notification %>

    <%= f.input :name %>
    <%= f.input :username %>
    <%= f.label :gender %>
    <%= f.select :gender_id, options_from_collection_for_select(Gender.all, "id", "name") %>
    <p>
      <small>On Transbucket, gender helps control the pronouns you are referred to with. Currently, MTF and FTM genders correspond to binary pronoun identifications. For gender neutral pronouns, please use "None" or "GenderQueer" as your gender. Future updates will allow for pronoun choice independent of your gender identification.</small>
    </p>
    <%= f.input :email %>
    <%= f.input :password, label: "New Password", autocomplete: "off" %>
    <%= f.input :password_confirmation, label: "New Password Confirmation", autocomplete: "off" %>
    <%= f.input :current_password %>

    <div>
      <%= f.submit "Update", class: "btn btn-primary pull-right" %>
      <br clear="both">
    </div>
  <% end %>
</div>

<h2>Edit <%= resource_name.to_s.humanize %> Settings</h2>

<% Preference.new(user_id: resource.id) unless resource.preference.present? %>

<div class="profile_well">
  <%= simple_form_for(resource.preference, :url => user_preferences_path(resource), :html => {:method => :put, :class => 'form-horizontal'}) do |f| %>
  <div class="control-group">
    <p>Safe mode will replace all submission images on the index page with safe for work images of kittens.</p>
    <%= f.input :safe_mode, :size => 10, :value => resource.preference.safe_mode %>
    <p>Notification mode allows you to receive emails alerting you to new comments on your submission.</p>
    <%= f.input :notification, :size => 10, :value => resource.preference.notification  %>
  </div>
    <%= f.submit "Update", class: "btn btn-primary pull-right" %>
    <br clear="both">
  <% end %>
</div>

<h3>Cancel my account</h3>

<p><%= button_to "Cancel my account", registration_path(resource_name), :data => { :confirm => "Are you sure?" }, :method => :delete, :class => 'btn' %></p>
</div>

<div class="span6">
	<h2>Your Submissions</h2>
	<div class="profile_well">
		<% if current_user.pins.length == 0 then %>
  		<%= link_to 'Submit Now +', new_pin_path %>
		<% else %>
  		<% for pin in current_user.pins do %>
  				<%= link_to '<i class="fa fa-pencil-square-o"></i>'.html_safe, edit_pin_path(pin) %>
        | <%= link_to '<i class="fa fa-trash-o"></i>'.html_safe, pin, method: :delete, data: { confirm: 'Are you sure?' } %>
        | submission #<%= pin.id %>
        <br>
      		<% for pin_image in pin.pin_images do %>
      		  <%= link_to (image_tag pin_image.photo), pin %><br>
      		<% end %>
          <hr>
		    <% end %>
		<% end %>
		</div>
</div>
<br clear="both">
