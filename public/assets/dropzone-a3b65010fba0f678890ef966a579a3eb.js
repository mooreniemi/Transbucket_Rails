$(document).ready(function(){var e=document.querySelector("#dropper");if(e){Dropzone.autoDiscover=!1;var n=new Dropzone("#dropper",{url:"/pin_images",maxFilesize:1,paramName:"pin_image[photo]",addRemoveLinks:!0,headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},autoProcessQueue:!0,uploadMultiple:!0,parallelUploads:100,maxFiles:10});n.on("success",function(e,n){var o=$("#pin_pin_image_ids"),t=document.createElement("button"),a=document.createElement("input");$(t).on("click",function(){event.preventDefault(),$.ajax({headers:{Accept:"application/json","Content-Type":"application/json"},url:"/pin_images/"+n.id+".json",type:"PATCH",data:JSON.stringify({caption:$(event.target).text()}),success:function(){console.log("Pin image Successfully Patched!")},error:function(e,n,o){console.log("The following error occured: "+n,o)},complete:function(){console.log("Pin image Patch Ran")}})}),o.val(o.val()+","+n.id),a.type="text",a.name=n.id,a.placeholder="Caption",e.previewTemplate.appendChild(a),e.previewTemplate.appendChild(t)})}});